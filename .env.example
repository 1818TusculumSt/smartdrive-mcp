# =============================================================================
# SmartDrive MCP - Environment Configuration
# =============================================================================
# Copy this file to .env and fill in your actual values
# Never commit .env to version control!

# -----------------------------------------------------------------------------
# Pinecone Configuration (Required)
# -----------------------------------------------------------------------------
# Get these from: https://www.pinecone.io/
# 1. Create an index named "smartdrive"
# 2. Set dimensions to 384 (for all-MiniLM-L6-v2 model)
# 3. Set metric to "cosine"

PINECONE_API_KEY=your_pinecone_api_key_here
PINECONE_INDEX_NAME=smartdrive
PINECONE_HOST=smartdrive-xxxxx.svc.aped-xxxx-xxxx.pinecone.io

# -----------------------------------------------------------------------------
# Microsoft Azure Configuration (Required)
# -----------------------------------------------------------------------------
# Get these from: https://portal.azure.com
# 1. Go to App Registrations → New registration
# 2. Name: SmartDrive MCP
# 3. Supported accounts: Personal Microsoft accounts only
# 4. Add API permissions: Files.Read.All, User.Read
# 5. Enable "Allow public client flows" in Authentication

MICROSOFT_CLIENT_ID=your_azure_client_id_here
MICROSOFT_TENANT_ID=consumers

# -----------------------------------------------------------------------------
# Azure Computer Vision Configuration (Optional - for Cloud OCR)
# -----------------------------------------------------------------------------
# Get these from: https://portal.azure.com
# 1. Create a "Computer Vision" resource
# 2. Choose "Free F0" tier (5,000 pages/month free) or "Standard S1" ($1.50/1000 pages)
# 3. Get your API key and endpoint
#
# Benefits of Azure OCR vs Local:
# - 10-20x faster (1-3 seconds/page vs 10-30 seconds/page)
# - More accurate
# - No GPU/CPU load on your machine
# - Free tier: 5,000 pages/month, Standard: ~$0.50-$2 for typical use
#
# Leave blank to use local EasyOCR (free but slower)

AZURE_VISION_KEY=your_azure_vision_key_here
AZURE_VISION_ENDPOINT=https://your-region.api.cognitive.microsoft.com/

# -----------------------------------------------------------------------------
# OCR Strict Mode (Optional)
# -----------------------------------------------------------------------------
# When set to "true", ONLY uses Azure OCR (no EasyOCR fallback)
# Files that fail Azure OCR will be skipped entirely
#
# Use case: Speed optimization when you have Azure credits
# - Avoids slow EasyOCR fallback (10-30 seconds/page)
# - Files fail gracefully if Azure OCR is unavailable or fails
#
# Default: false (allows EasyOCR fallback)

OCR_STRICT_MODE=false

# -----------------------------------------------------------------------------
# Embedding Provider Configuration (Optional)
# -----------------------------------------------------------------------------
# Choose how SmartDrive generates embeddings for your documents
# Options: "local", "api", "pinecone", "voyage"
# Default: "local" (recommended - free, fast, private)

EMBEDDING_PROVIDER=local

# -----------------------------------------------------------------------------
# Local Embedding Model (Optional)
# -----------------------------------------------------------------------------
# Only used when EMBEDDING_PROVIDER=local
# This model runs on your machine - no API calls, completely free!
# Default: all-MiniLM-L6-v2 (384 dimensions, fast, accurate)
#
# Other options:
# - all-mpnet-base-v2 (768 dimensions, more accurate, slower)
# - paraphrase-MiniLM-L6-v2 (384 dimensions, good for paraphrasing)

EMBEDDING_MODEL=all-MiniLM-L6-v2

# -----------------------------------------------------------------------------
# API Embedding Configuration (Optional)
# -----------------------------------------------------------------------------
# Only used when EMBEDDING_PROVIDER=api
# For OpenAI-compatible embedding APIs

# EMBEDDING_API_URL=https://api.openai.com/v1/embeddings
# EMBEDDING_API_KEY=your_api_key_here
# EMBEDDING_MODEL=text-embedding-ada-002

# -----------------------------------------------------------------------------
# Pinecone Inference Configuration (Optional)
# -----------------------------------------------------------------------------
# Only used when EMBEDDING_PROVIDER=pinecone
# Uses Pinecone's hosted embedding models (1024 or 512 dimensions)
# Note: Requires PINECONE_API_KEY to be set above
# Recommended: llama-text-embed-v2 with dimension=1024 for high quality

# EMBEDDING_MODEL=llama-text-embed-v2

# -----------------------------------------------------------------------------
# Voyage AI Configuration (Optional)
# -----------------------------------------------------------------------------
# Only used when EMBEDDING_PROVIDER=voyage
# Get API key from: https://www.voyageai.com/
#
# Benefits:
# - 32,000 token context (128K chars) - can embed entire 50+ page PDFs!
# - 2048 dimensions for maximum quality
# - Fast API, optimized for long documents
# - $0.10 per 1M tokens (~$0.10-0.50 for 600 typical files)
#
# Recommended for: Large documents, academic papers, books, reports

# VOYAGE_API_KEY=your_voyage_api_key_here
# VOYAGE_MODEL=voyage-3-large

# -----------------------------------------------------------------------------
# Performance Settings (Optional)
# -----------------------------------------------------------------------------
# Timeout for embedding API calls (in seconds)
# Default: 30 seconds

EMBEDDING_TIMEOUT=30

# -----------------------------------------------------------------------------
# Notes
# -----------------------------------------------------------------------------
#
# Recommended Setup for Most Users:
# ----------------------------------
# EMBEDDING_PROVIDER=local
# EMBEDDING_MODEL=all-MiniLM-L6-v2
#
# This gives you:
# ✅ Zero API costs
# ✅ Complete privacy (nothing leaves your machine)
# ✅ Fast performance
# ✅ Good accuracy for semantic search
#
# File Support:
# -------------
# SmartDrive automatically extracts text from:
# - Documents: PDF (with OCR!), DOCX, DOC
# - Spreadsheets: XLSX, XLSM, CSV
# - Data: JSON, TXT
# - Images: PNG, JPG, TIFF, BMP, GIF (with OCR!)
# - Archives: ZIP (list or extract contents)
#
# OCR Support:
# ------------
# Built-in OCR using EasyOCR - no external software needed!
# - Automatically detects scanned PDFs
# - Processes images with text
# - Downloads models on first use (~100MB)
# - See SETUP_OCR.md for optional Tesseract (faster)
#

# -----------------------------------------------------------------------------
# Azure Document Intelligence Configuration (Optional - Advanced Form/Table Extraction)
# -----------------------------------------------------------------------------
# Get these from: https://portal.azure.com
# 1. Create a "Document Intelligence" resource (or search "Form Recognizer")
# 2. Choose tier: Free F0 (first 2 pages only) or Standard S0 (full documents)
# 3. Get your API key and endpoint
#
# What it does:
# - Premium AI extraction for forms, tables, invoices, receipts, tax documents
# - Intelligent form extraction (key-value pairs)
# - Table extraction with structure preservation
# - Handwriting recognition
# - Layout analysis (headers, sections, paragraphs)
#
# When to use:
# - Tax documents (W-2, 1099, 1040 forms)
# - Invoices and receipts with complex layouts
# - Business forms with structured fields
# - Contracts with tables and signatures
# - Handwritten notes and forms
# - Any document requiring precise table extraction
#
# Pricing & Limitations:
# Free Tier (F0):
# - Cost: Free
# - Limitation: Only processes FIRST 2 PAGES of multi-page documents
# - Monthly limit: 500 pages per month
# - Speed: 1 transaction per second (TPS)
# - Best for: Testing or documents that are 1-2 pages only
#
# Standard Tier (S0):
# - Cost: $1.50 per 1,000 pages
# - Full document processing: All pages extracted, no page limits
# - No monthly limits: Pay-per-use
# - Speed: 15 TPS
# - Typical cost: ~$0.75 for 500 pages
# - RECOMMENDED for production use with multi-page documents
#
# Three Operating Modes:
# - never (default): Disabled, uses standard Azure OCR → EasyOCR fallback
# - selective (recommended): Smart detection - automatically enabled for files with
#   keywords: tax, invoice, receipt, form, w2, 1099, w-2, 1040
# - always: Use for ALL documents (higher cost, maximum quality)
#
# Setup:
# 1. Go to Azure Portal → Create "Document Intelligence" resource
# 2. Choose Free F0 (testing) or Standard S0 (production)
# 3. Go to "Keys and Endpoint" after creation
# 4. Copy KEY 1 and Endpoint URL below
#
# Example configuration:
# AZURE_FORM_RECOGNIZER_KEY=a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6
# AZURE_FORM_RECOGNIZER_ENDPOINT=https://eastus.api.cognitive.microsoft.com/
# USE_DOCUMENT_INTELLIGENCE=selective
#
# Fallback chain (if Document Intelligence fails or is disabled):
# 1. Azure Document Intelligence (if enabled and conditions met)
# 2. Azure Computer Vision OCR (if credentials provided above)
# 3. EasyOCR (local, always available)
#
# Performance:
# - Processing time: 5-15 seconds per document (varies with pages/complexity)
# - Timeout: 2-minute safety timeout prevents hanging
# - Progress: Real-time page-by-page progress indicator
# - Reliability: Automatic fallback if service unavailable or times out
#
# Leave blank to disable (uses standard OCR methods only)

AZURE_FORM_RECOGNIZER_KEY=your_azure_form_recognizer_key_here
AZURE_FORM_RECOGNIZER_ENDPOINT=https://your-forms-endpoint.cognitiveservices.azure.com/

# Document Intelligence Mode: never, selective, or always
# - never: Disabled (uses standard Azure OCR → EasyOCR chain)
# - selective: Smart detection for tax/invoice/form keywords (RECOMMENDED)
# - always: Use for all documents (requires S0 tier for multi-page docs)
USE_DOCUMENT_INTELLIGENCE=selective
